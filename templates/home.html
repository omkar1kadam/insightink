<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightInk - Transform Your Ideas</title>
    <link rel="stylesheet" href="{{ url_for('static' , filename='css/styles.css')}}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Page Transition Element -->
    <!-- <div class="page-transition-wrapper"></div> -->

    <!-- Header -->
    <header>
        <a href="/" class="logo">InsightInk</a>
        <nav>
            <ul>
                <li><a href="/services" data-page="services">Services</a></li>
                <li><a href="/flow" data-page="flow">Flow</a></li>
                <li><a href="/about" data-page="about">About</a></li>
                <li><a href="/contact" data-page="contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1>Welcome to InsightInk</h1>
        <p>Transform your ideas into impactful digital experiences. We craft innovative solutions that inspire and
            engage.</p>
        <div class="cta-buttons">
            <a href="#search-section" class="btn primary">Get started</a>
            <a href="contact" class="btn">Get in Touch</a>
        </div>
    </section>
    <!-- 1st end -->
    <section class="search-section" id="search-section">
        <div class="search-container">
            <div class="search-box">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" placeholder="Paste your link of reddit post here..." class="search-input">
                <button class="search-button">
                    <span>Search</span>
                    <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </section>
    <!-- main showoff our websitesection -->
    <section class="analysis-layout">
        <!-- Left Column -->
        <div class="post-section">
            <div class="content-box">
                <h2>POST</h2>
                <div class="post-content">
                    <!-- Post content will go here -->
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="analysis-section">
            <!-- Top Comments Section -->
            <div class="top-comments content-box">
                <h2>TOP COMMENTS</h2>
                <div class="comments-content">
                    <!-- Comments will go here -->
                </div>
            </div>
                    <div class="chart-box content-box">
                        <h3>BAR CHART</h3>
                        <div class="bar-chart">
                            <!-- Bar chart will be rendered here -->
                        </div>
                    </div>
                </div>

                <!-- Right Chart Section -->
                <div class="chart-box content-box pie-chart-section">
                    <h3>RADAR CHART</h3>
                    <div class="pie-chart">
                        <!-- Radar chart will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chatbot Section -->    
    <section class="chatbot-section">
        <div class="chatbot-container">
            <div class="chatbot-avatar">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                    <line x1="9" y1="9" x2="9.01" y2="9"/>
                    <line x1="15" y1="9" x2="15.01" y2="9"/>
                </svg>
            </div>
            <div class="chatbot-input">
                <input type="text" id="comment" placeholder="Ask me anything..." class="chat-input">
                <button onclick="analyzeSentiment()" class="chat-send">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </button>
            </div>
        </div>
        <div class="loading" style="display: none;">Analyzing...</div>
        <div id="result" class="chatbot-output result-box" style="display: none;"></div>
    </section>

    <section class="features-section">
        <div class="features-container">
            <div class="features-header">
                <h2>Why Choose InsightInk</h2>
                <p>Discover how our innovative solutions can transform your digital presence and drive success for your
                    business.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-content">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                            </svg>
                        </div>
                        <h3>Sentiment Analysis</h3>
                        <p>âœ… Our advanced NLP model precisely analyzes Reddit comments, categorizing them as Positive,
                            Neutral, or Negative with exceptional accuracy.</p>
                    </div>
                </div>
                <div class="feature-card highlight">
                    <div class="feature-content">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <!-- Outer Circle -->
                                <circle cx="12" cy="12" r="9"></circle>
                                <!-- Middle Circle -->
                                <circle cx="12" cy="12" r="5"></circle>
                                <!-- Inner Circle -->
                                <circle cx="12" cy="12" r="2"></circle>
                                <!-- Arrow -->
                                <path d="M12 2v4"></path>
                                <path d="M12 22v-4"></path>
                                <path d="M2 12h4"></path>
                                <path d="M22 12h-4"></path>
                            </svg>

                        </div>
                        <h3>Accurate Insights</h3>
                        <p>âœ… Leverage our high-accuracy NLP model to classify comments into Positive, Neutral, or
                            Negative sentiments.</p>
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-content">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path
                                    d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                </path>
                                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                            </svg>
                        </div>
                        <h3>Data Visualization</h3>
                        <p>ðŸ“Š Get an in-depth sentiment breakdown with intuitive bar charts, helping you visualize
                            discussions at a glance.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <ul>
            <li><a href="/privacy">Privacy Policy</a></li>
            <li><a href="/terms">Terms of Service</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>
    </footer>

    <!-- Scripts -->
    <script type="js" src="{{ url_for( 'static' , filename='js/transitions.js')}}"></script>
    <script type="js" src="{{ url_for( 'static' , filename='js/animations.js')}}"></script>


    <script>
     
     document.addEventListener("DOMContentLoaded", function () {
    const searchButton = document.querySelector(".search-button");
    const searchInput = document.querySelector(".search-input");
    const commentsContent = document.querySelector(".comments-content");
    const barChartContainer = document.querySelector(".bar-chart");
    const pieChartContainer = document.querySelector(".pie-chart");

    const analyzeButton = document.getElementById("analyze-button"); // Ensure there's an ID for the analyze button
    const commentInput = document.getElementById("comment");
    const resultDiv = document.getElementById("result");
    const loadingDiv = document.querySelector(".loading");

    // Fetch and analyze Reddit comments
    searchButton.addEventListener("click", async function () {
        const postUrl = searchInput.value.trim();
        console.log(postUrl);
        if (!postUrl) {
            alert("Please enter a Reddit post URL!");
            return;
        }

        try {
            commentsContent.innerHTML = "<p>Loading comments...</p>";

            const response = await fetch("/fetch_comments", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ post_url: postUrl }),
            });

            const data = await response.json();

            if (data.error) {
                commentsContent.innerHTML = `<p>Error: ${data.error}</p>`;
                return;
            }

            commentsContent.innerHTML = "";
            barChartContainer.innerHTML = "";
            pieChartContainer.innerHTML = "";

            // Display top comments
            data.comments.slice(0, 5).forEach((comment) => {
                const commentDiv = document.createElement("div");
                commentDiv.classList.add("comment");
                commentDiv.innerHTML = `<p><b>Sentiment:</b> ${comment.sentiment}</p>
                                        <p>${comment.comment}</p>`;
                commentsContent.appendChild(commentDiv);
            });

            // Display Sentiment Data
            generateBarChart(data.percent_negative, data.percent_neutral, data.percent_positive);
            generatePieChart(data.emotions);

        } catch (error) {
            console.error("Error fetching comments:", error);
            commentsContent.innerHTML = "<p>Error fetching comments.</p>";
        }
    });

    // Analyze user-inputted comment
    analyzeButton.addEventListener("click", async function () {
        const comment = commentInput.value.trim();
        if (!comment) {
            alert("Please enter a comment.");
            return;
        }

        loadingDiv.style.display = "block";
        resultDiv.style.display = "none";

        try {
            const response = await fetch("/analyze", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ comment })
            });

            const data = await response.json();
            loadingDiv.style.display = "none";

            if (data.error) {
                resultDiv.innerHTML = `<strong>Error:</strong> ${data.error}`;
            } else {
                resultDiv.innerHTML = `<strong>Analysis:</strong><br>${data.analysis}`;
            }
            resultDiv.style.display = "block";

        } catch (error) {
            loadingDiv.style.display = "none";
            resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            resultDiv.style.display = "block";
        }
    });

    function generateBarChart(negative, neutral, positive) {
        barChartContainer.innerHTML = `
            <p>Negative: ${negative.toFixed(2)}%</p>
            <p>Neutral: ${neutral.toFixed(2)}%</p>
            <p>Positive: ${positive.toFixed(2)}%</p>
        `;
    }

    function generatePieChart(emotions) {
        pieChartContainer.innerHTML = "<p>Emotion Analysis:</p>";
        for (const [emotion, count] of Object.entries(emotions)) {
            pieChartContainer.innerHTML += `<p>${emotion}: ${count}</p>`;
        }
    }
});
    </script>
</body> 
    